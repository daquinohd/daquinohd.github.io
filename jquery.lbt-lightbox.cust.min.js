/*!
 * LBT Lightbox v1.1.2
 * by Jean Kássio
 *
 * More info:
 * https://jeankassio.dev
 *
 * Copyright Jean Kássio
 * Released under the MIT license
 * https://github.com/jeankassio/LBT-Lightbox/blob/main/LICENSE
 *
 * @preserve
 */
!function(t){t.fn.lbtLightBox=function(e){let i,n;$closebutton='<svg width="24" height="24" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg"><path fill-rule="evenodd" clip-rule="evenodd" d="M4.227 4.227a.774.774 0 0 1 1.095 0L12 10.905l6.678-6.678a.774.774 0 1 1 1.095 1.095L13.095 12l6.678 6.678a.774.774 0 1 1-1.095 1.095L12 13.095l-6.678 6.678a.774.774 0 1 1-1.095-1.095L10.905 12 4.227 5.322a.774.774 0 0 1 0-1.095Z" fill="currentColor"/></svg>',$dotoptions='<svg width="20" height="20" viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path d="M10.001 7.8a2.2 2.2 0 1 0 0 4.402A2.2 2.2 0 0 0 10 7.8zm0-2.6A2.2 2.2 0 1 0 9.999.8a2.2 2.2 0 0 0 .002 4.4zm0 9.6a2.2 2.2 0 1 0 0 4.402 2.2 2.2 0 0 0 0-4.402z" fill="currentColor"/></svg>',$odownload='<svg width="24" height="24" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path d="M19 9h-4V3H9v6H5l7 8zM4 19h16v2H4z" fill="currentColor"/></svg>',$oforward='<svg width="24" height="24" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path d="M14.4 14.249v5.228l8.4-8.028-8.4-7.886v4.78c-10.53 0-13.2 11.678-13.2 11.678 2.981-5.266 7.484-5.772 13.2-5.772z" fill="currentColor"/></svg>',$osmile='<svg width="20" height="20" viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path d="M10 20a10 10 0 1 1 0-20 10 10 0 0 1 0 20zM6.5 9a1.5 1.5 0 1 0 0-3 1.5 1.5 0 0 0 0 3zm7 0a1.5 1.5 0 1 0 0-3 1.5 1.5 0 0 0 0 3zm2.16 3H4.34a6 6 0 0 0 11.32 0z" fill="currentColor"/></svg>',$ostar='<svg width="20" height="20" viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path d="m10 15-5.878 3.09 1.123-6.545L.489 6.91l6.572-.955L10 0l2.939 5.955 6.572.955-4.756 4.635 1.123 6.545z" fill="currentColor"/></svg>',$ochat='<svg width="24" height="24" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path fill="none" d="M0 0h24v24H0z"/><path d="M5.763 17H20V5H4v13.385L5.763 17zm.692 2L2 22.5V4a1 1 0 0 1 1-1h18a1 1 0 0 1 1 1v14a1 1 0 0 1-1 1H6.455z" fill="currentColor"/></svg>',$loading='<svg version="1.1" id="lbt-loading" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px" viewBox="0 0 100 100" enable-background="new 0 0 0 0" xml:space="preserve"> <path fill="#fff" d="M73,50c0-12.7-10.3-23-23-23S27,37.3,27,50 M30.9,50c0-10.5,8.5-19.1,19.1-19.1S69.1,39.5,69.1,50"> <animateTransform attributeName="transform" attributeType="XML" type="rotate" dur="0.5s" from="0 50 50" to="360 50 50" repeatCount="indefinite" /></path></svg>',$btn_play='<svg class="lbt_btn_play" width="200" height="200" viewBox="0 0 200 200" xmlns="http://www.w3.org/2000/svg"><path stroke-width="16.667" d="M100 183.333c46.024 0 83.333-37.309 83.333-83.333S146.024 16.667 100 16.667 16.667 53.976 16.667 100 53.976 183.333 100 183.333Zm-20.833-54.166 50-29.167-50-29.167v58.334ZM87.5 112.5l16.667-12.5L87.5 87.5v25Z"/></svg>',$oprofile="https://github.com/jeankassio.png";let o,a,l,r,s,d,c,h,b,u,m,_,g,p,v,f;$innerHeight=window.innerHeight,$innerWidth=.7*window.innerWidth;e=t.extend({qtd_pagination:8,pagination_width:"60px",pagination_height:"60px",captions:!1,captions_selector:".caption",custom_children:"img",db:!1},e);function x(e,c){if(V(),z(),i=t(c.custom_children,c.container_images),n=i.length,1==c.db){$version_db=1;let e=indexedDB.open("lbt_lightbox",$version_db);e.onupgradeneeded=function(t){if(f=e.result,t.oldVersion==$version_db)return;let i=f.createObjectStore("images",{keyPath:"id",autoIncrement:!0});i.createIndex("type","type"),i.createIndex("image","image"),i.createIndex("created","created")},e.onsuccess=function(){f=e.result,async function(e){for(var n=0;n<t(e).length;n++)await w("images",t(e).eq(n).attr("src")).then((function(i){t(e).eq(n).attr("src",URL.createObjectURL(i.image))})).catch((function(t){}));P(i)}(i)},e.onerror=function(){console.error("Error",e.error)},e.onblocked=function(){e.result.close(),alert("Database is outdated, refresh the page in previous tab.")}}t(document).on("click",c.lbr_id+" "+c.custom_children,(function(e){y(t(this))})),t(document).on("click",c.lbt_id+" #lbt-close_lightbox",(function(t){S()})),t(document).keyup((function(t){"Escape"===t.key?S():"ArrowRight"===t.key?M():"ArrowLeft"===t.key&&C()})),t(document).on("click",c.lbt_id+" img.lbr-thumb",(function(e){L(t(this))})),t(document).on("click",c.lbt_id+" #lbt_previous",(function(t){C()})),t(document).on("click",c.lbt_id+" #lbt_next",(function(t){M()})),t(document).on("pointerdown",c.lbt_id+" .video_progress-line",(function(e){d.setPointerCapture(e.pointerId),E(e),t(".video_progress-line",c.container_lightbox).on("pointermove",(function(t){E(t)})),t(".video_progress-line",c.container_lightbox).on("pointerup",(function(e){t(this).off("pointermove")}))})),t(document).on("mouseout",c.lbt_id+" #lbt_videoplayer",(function(e){l=setTimeout((function(){if(0==t("#lbt_videoplayer:hover",c.container_lightbox).length){t(o).hasClass("paused")&&t(s).removeClass("active")}}),2e3)})),t(document).on("mouseout",c.lbt_id+" .video_progress-line",(function(e){t(".lbt_videoTime",c.container_lightbox).css("display","none")})),t(document).on("click",c.lbt_id+" #lbt_vsrc",(function(e){t(o).hasClass("paused")?j():T()})),t(document).on("mouseenter",c.lbt_id+" #lbt_videoplayer",(function(e){clearTimeout(l),t(s).addClass("active")})),t(document).on("waiting",c.lbt_id+" #lbt_vsrc",(function(t){v.style.display="block"})),t(document).on("canplay",c.lbt_id+" #lbt_vsrc",(function(t){v.style.display="none"})),t(document).on("play",c.lbt_id+" #lbt_vsrc",(function(t){T()})),t(document).on("pause",c.lbt_id+" #lbt_vsrc",(function(t){j()})),t(document).on("click",c.lbt_id+" .lbt_vPlayPause,"+c.lbt_id+" .lbt_btn_play",(function(e){t(o).hasClass("paused")?j():T()})),t(document).on("input",c.lbt_id+" .lbt_videoVolumeRange",(function(t){a.volume=u.value/100,0==u.value?b.innerHTML="volume_off":u.value<39?b.innerHTML="volume_down":b.innerHTML="volume_up"})),t(document).on("click",c.lbt_id+" .lbt_videoVolume",(function(t){0==u.value?(u.value=60,a.volume=.6,b.innerHTML="volume_up"):(u.value=0,a.volume=0,b.innerHTML="volume_off")})),t(document).on("click",c.lbt_id+" .lbt_fullScreen",(function(e){t(o).hasClass("openFullScreen")?(t(o).removeClass("openFullScreen"),t(p).html("fullscreen"),document.exitFullscreen()):(t(o).addClass("openFullScreen"),t(p).html("fullscreen_exit"),o.requestFullscreen())})),t(document).on("click",c.lbt_id+" .lbt_videoPip",(function(t){a.requestPictureInPicture()})),t(document).on("mousemove",c.lbt_id+" .video_progress-line",(function(t){let e=d.clientWidth+2,i=t.offsetX,n=a.duration,o=Math.floor(i/e*n),l=Math.floor(o/60),s=Math.floor(o%60);r.style.setProperty("--x",`${i}px`),r.style.display="block",i=i>=e-80?e-80:i<=75?75:t.offsetX,s<10&&(s="0"+s),r.innerHTML=`${l} : ${s}`}))}function w(t,e,i){return new Promise((function(i,n){var o=indexedDB.open("lbt_lightbox");o.onerror=function(t){n(Error("Error text"))},o.onupgradeneeded=function(t){t.target.transaction.abort(),n(Error("Not found"))},o.onsuccess=function(o){var a=o.target.result.transaction([t]).objectStore(t).index("type").get(e);a.onerror=function(t){n(Error("Error text"))},a.onsuccess=function(t){a.result?i(a.result):n(Error("object not found"))}}}))}function $(){n=i.length,0==t(".lbr-thumb.active",e.container_lightbox).data("thumb_id")?t("#lbt_previous",e.container_lightbox).css("display","none"):t("#lbt_previous",e.container_lightbox).css("display","block"),t(".lbr-thumb.active",e.container_lightbox).data("thumb_id")==n-1?t("#lbt_next",e.container_lightbox).css("display","none"):t("#lbt_next",e.container_lightbox).css("display","block")}function y(i){I(i),k(t(i).index(e.custom_children),null),A(i,"#lbt-thumbnails"),q(),t("body").addClass("lbr-ToFixed"),$()}function q(){$th=t(".lbr-thumb.active",e.container_lightbox).outerWidth()*(e.qtd_pagination/2)+t(".lbr-thumb.active",e.container_lightbox).outerWidth()/3,$sl=t("#lbt-thumbnails",e.container_lightbox).scrollLeft(),t("#lbt-thumbnails",e.container_lightbox).css("left","calc((50vw - "+$th+"px) + "+$sl+"px)")}function M(){t("#lbt-loading",e.container_lightbox).show(),n=i.length,$iIndex=t(".lbr-thumb.active",e.container_lightbox).data("thumb_id"),$iIndex++,$iIndex>=n?t("#lbt-loading",e.container_lightbox).hide():(H($iIndex),$tid=t(".lbr-thumb.active",e.container_lightbox).closest("li").next().find(".lbr-thumb").index(".lbr-thumb"),k($iIndex,$tid),q(),$())}function C(){t("#lbt-loading",e.container_lightbox).show(),n=i.length,$iIndex=t(".lbr-thumb.active",e.container_lightbox).data("thumb_id"),$iIndex--,$iIndex<0?t("#lbt-loading",e.container_lightbox).hide():(H($iIndex),$tid=t(".lbr-thumb.active",e.container_lightbox).closest("li").prev().find(".lbr-thumb").index(".lbr-thumb"),k($iIndex,$tid),q(),$())}function L(o){t("#lbt-loading",e.container_lightbox).show(),n=i.length,$iIndex=t(o).data("thumb_id"),H($iIndex),$tid=t(o).index(".lbr-thumb"),k($iIndex,$tid),q(),$()}function S(){t("body").removeClass("lbr-ToFixed"),t("#lbt-lightbox_imgs",e.container_lightbox).remove()}function I(i){S(),t(e.container_lightbox).append([t("<div/>",{id:"lbt-lightbox_imgs"}).append([t("<div/>",{id:"lbt_previous"}).append([t("<i/>",{class:"fa fa-angle-left"}).attr("aria-hidden","true")]),t("<div/>",{id:"lbt_lightbox-wrapper"}).append([t("<div/>",{class:"lbt-image-wrapper"}).append([$loading,t("<div/>",{id:"lbt-lightbox-media"}),!0===e.captions?t("<p/>",{id:"lbt-lightbox-caption"}).css({bottom:Number(e.pagination_height.replace("px",""))+50+"px"}):""])]),t("<div/>",{id:"lbt_next"}).append([t("<i/>",{class:"fa fa-angle-right"}).attr("aria-hidden","true")]),t("<div/>",{class:"lb-thumbnail-wrapper"}).append([t("<ul/>",{id:"lbt-thumbnails"}).css({height:Number(e.pagination_height.replace("px",""))+40+"px"})])])])}function H(o){n=i.length,$start_index=t(".lbr-thumb.active",e.container_lightbox).data("thumb_id"),$loadto=$start_index-o,$loadto<0?function(o){n=i.length;for(var a=1;a<=o;a++)$i_next=Math.abs(t("img.lbr-thumb").last().data("thumb_id"))+1,$i_id=t(".lbr-thumb.active").data("thumb_id")+a,n<=$i_next||$i_id<(Number.isInteger($f=Math.ceil(e.qtd_pagination/2+(e.qtd_pagination%2!=0?-1:0)))?$f+1:$f)||($obj=t("img.lbr-thumb",e.container_lightbox).not(".removed").first(),$obj.addClass("removed"),$obj.closest("li").animate({width:"0"},{duration:120,queue:!0}).queue((function(){t(this).remove().dequeue()})),t("#lbt-thumbnails",e.container_lightbox).append([$anim=t("<li/>").append([$thumb=t("<img/>",{class:"lbr-thumb"}).data("thumb_id",$i_next).css({width:e.pagination_width,height:e.pagination_height})]).css("width","0").animate({width:t(".lbr-thumb.active",e.container_lightbox).outerWidth()},120,(function(){$anim.removeAttr("style")}))]),void 0===i.eq($i_next).data("lbt-thumb")?B(i.eq($i_next),{h:Number(e.pagination_height.replace("px","")),w:Number(e.pagination_width.replace("px",""))},$thumb):t($thumb).attr("src",i.eq($i_next).data("lbt-thumb")))}(Math.abs($loadto)):$loadto>0&&function(o){n=i.length;for(var a=1;a<=o;a++)$i_previous=Math.abs(t("img.lbr-thumb").first().data("thumb_id"))-1,$i_id=t(".lbr-thumb.active",e.container_lightbox).data("thumb_id")-a,$i_previous<0||$i_id>=Math.ceil(n-(e.qtd_pagination/2+(e.qtd_pagination%2!=0?1:0)))||($obj=t("img.lbr-thumb",e.container_lightbox).not(".removed").last(),$obj.addClass("removed"),$obj.closest("li").animate({width:"0"},{duration:120,queue:!0}).queue((function(){t(this).remove().dequeue()})),t("img.lbr-thumb",e.container_lightbox).closest("li").first().before([$anim=t("<li/>").append([$thumb=t("<img/>",{class:"lbr-thumb"}).data("thumb_id",$i_previous).css({width:e.pagination_width,height:e.pagination_height})]).css("width","0").animate({width:t(".lbr-thumb.active",e.container_lightbox).outerWidth()},120,(function(){$anim.removeAttr("style")}))]),void 0===i.eq($i_previous).data("lbt-thumb")?B(i.eq($i_previous),{h:Number(e.pagination_height.replace("px","")),w:Number(e.pagination_width.replace("px",""))},$thumb):t($thumb).attr("src",i.eq($i_previous).data("lbt-thumb")))}($loadto)}function k(n,l){t("#lbt-lightbox-media",e.container_lightbox).empty(),t("img.lbr-thumb",e.container_lightbox).removeClass("active"),null!==l&&t(".lbr-thumb",e.container_lightbox).eq(l).addClass("active"),i.eq(n).data("iframe_src")?function(n){$iframe=i.eq(n).data(),t("#lbt-lightbox-media",e.container_lightbox).append([$_iframe=t("<iframe/>",{src:$iframe.iframe_src}).attr("frameborder",$iframe.frameborder).attr("allow",$iframe.iframe_allow).attr("fullscreen",$iframe.fullscreen).addClass("lbt-iframe-video").css("visibility","hidden")]),$_iframe.on("load",(function(){t(".lbt-iframe-video",e.container_lightbox).css("visibility","visible"),t("#lbt-loading",e.container_lightbox).hide()}))}(n):i.eq(n).data("html5Video")?function(n){$HVideo=i.eq(n).data(),t("#lbt-lightbox-media",e.container_lightbox).append('<div id="lbt_videoplayer">              <div class="lbt_loadingVideo"></div>               '+$btn_play+'              <video preload="metadata" id="lbt_vsrc">                  <source src="'+$HVideo.html5Video+'" type="'+$HVideo.html5type+'" />              </video>              <div class="lbt_videoTime">0:00</div>              <div class="lbt_videoControls active">                  <div class="video_progress-line">                      <canvas class="video_buffer-bar"></canvas>                      <div class="video_progress-bar">                          <span></span>                      </div>                  </div>                  <div class="lbt_videoControls-list">                      <div class="lbt_videoControls-left">                          <span class="icon">                          <i class="material-icons lbt_vPlayPause">play_arrow</i>                          </span>                          <span class="icon">                          <i class="material-icons lbt_videoVolume">volume_up</i>                          <input type="range" min="0" max="100" class="lbt_videoVolumeRange" />                          </span>                          <div class="timer">                              <span class="lbt_videoCurrent">0:00</span> /                               <span class="lbt_videoDuration">0:00</span>                          </div>                      </div>                      <div class="lbt_videoControls-right">                          <span class="icon">                          <i class="material-icons lbt_videoPip">picture_in_picture_alt</i>                          </span>                          <span class="icon">                          <i class="material-icons lbt_fullScreen">fullscreen</i>                          </span>                      </div>                  </div>              </div>          </div>'),t("#lbt-loading",e.container_lightbox).hide(),o=document.querySelector("#lbt_videoplayer"),a=o.querySelector("#lbt_vsrc"),r=o.querySelector(".lbt_videoTime"),s=o.querySelector(".lbt_videoControls"),d=o.querySelector(".video_progress-line"),c=o.querySelector(".video_progress-bar"),fastRewind=o.querySelector(".lbt_fastRewind"),h=o.querySelector(".lbt_vPlayPause"),b=o.querySelector(".lbt_videoVolume"),u=o.querySelector(".lbt_videoVolumeRange"),m=o.querySelector(".lbt_videoCurrent"),_=o.querySelector(".lbt_videoDuration"),g=o.querySelector(".lbt_videoPip"),p=o.querySelector(".lbt_fullScreen"),v=o.querySelector(".lbt_loadingVideo"),t("#lbt_vsrc",e.container_lightbox).on("loadeddata",(function(i){!function(i){let n=i.target.duration,o=Math.floor(n/60),a=Math.floor(n%60);a<10&&(a="0"+a),_.innerHTML=`${o} : ${a}`,t(".lbt_btn_play",e.container_lightbox).show()}(i)})),t("#lbt_vsrc",e.container_lightbox).on("timeupdate",(function(t){!function(t){let e=t.target.currentTime,i=Math.floor(e/60),n=Math.floor(e%60);n<10&&(n="0"+n),m.innerHTML=`${i} : ${n}`;let o=t.target.duration,a=e/o*100+.5;c.style.width=`${a}%`}(t)}))}(n):(console.log(i.eq(n).data()),$img=i.eq(n).attr("src"),function(i){t("#lbt-lightbox-media",e.container_lightbox).append([t("<img/>",{id:"lbt-lightbox-image"}).css({"max-height":"calc(100% - "+(165+Number(e.pagination_height.replace("px","")))+"px)",top:"calc(50% - "+e.pagination_height.replace("px","")/2+"px)"})]);var n=new Image,o=document.getElementById("lbt-lightbox-image");n.src=i,n.onload=function(){o.src=n.src,t("#lbt-loading",e.container_lightbox).hide()}}($img)),!0===e.captions&&(i.eq(n).find(e.captions_selector).length?t("#lbt-lightbox-caption",e.container_lightbox).text(i.eq(n).find(e.captions_selector).text()):i.eq(n).next(e.captions_selector).length?t("#lbt-lightbox-caption",e.container_lightbox).text(i.eq(n).next(e.captions_selector).text()):i.eq(n).parent().find(e.captions_selector).length&&t("#lbt-lightbox-caption",e.container_lightbox).text(i.eq(n).parent().find(e.captions_selector).text()))}function T(){h.innerHTML="pause",h.title="pause",t(o).addClass("paused"),t(".lbt_btn_play",e.container_lightbox).hide(),a.play()}function j(){h.innerHTML="play_arrow",h.title="play",t(o).removeClass("paused"),t(".lbt_btn_play",e.container_lightbox).show(),a.pause()}function E(t){let e=a.duration,i=d.clientWidth+2,n=t.offsetX;a.currentTime=n/i*e;let o=a.currentTime/e*100+.5;c.style.width=`${o}%`;let l=a.currentTime,r=Math.floor(l/60),s=Math.floor(l%60);s<10&&(s="0"+s),m.innerHTML=`${r} : ${s}`}function z(){$lbt_hvideos=t("video",e.container_images),t($lbt_hvideos).each((function(e){t(this).after([$obj=t("<img/>",{class:t(this).attr("class")}).data("html5Video",t(this).find("source").attr("src")).data("html5type",t(this).find("source").attr("type"))]),async function(e,i,n,o){const a=document.createElement("video"),l=document.createElement("canvas");a.style.display="none",l.style.display="none",a.setAttribute("crossOrigin","anonymous"),await new Promise(((t,i)=>{a.addEventListener("loadedmetadata",(()=>{a.width=n,a.height=o,l.width=n,l.height=o,a.currentTime=.25*a.duration})),a.addEventListener("seeked",(()=>t())),a.src=e})),l.getContext("2d").drawImage(a,0,0,n,o);const r=l.toDataURL("image/png");t(i).attr("src",r)}(t(this).find("source").attr("src"),$obj,t(this).width(),t(this).height()),t(this).remove()})),i=t(e.custom_children,e.container_images)}function V(){$lbt_ivideos=t("iframe",e.container_images),t($lbt_ivideos).each((function(n){$lbt_ivideos_thumbnail="",$lbt_ivideos_src=t(this).attr("src"),$lbt_ivideos_width=t(this).css("width"),$lbt_ivideos_height=t(this).css("height"),$lbt_ivideos_frameborder=t(this).attr("frameborder"),$lbt_ivideos_fullscre=void 0!==t(this).attr("allowfullscreen")&&!1!==t(this).attr("allowfullscreen"),$lbt_ivideos_allow=t(this).attr("allow");var o=new RegExp("(?:https?://)?(?:www.)?youtu(?:.be/|be.com/S*(?:watch|embed)(?:(?:(?=/[-a-zA-Z0-9_]{11,}(?!S))/)|(?:S*v=|v/)))([-a-zA-Z0-9_]{11,})"),a=new RegExp("(?:https?://)?(?:www.|player.)?vimeo.com(?:/*(?:video/|))([-a-zA-Z0-9_]{9})|.([w\\-_]+)&?=([-a-zA-Z0-9_]{10})");if(o.test($lbt_ivideos_src))$lbt_ivideos_id=$lbt_ivideos_src.match(/(?:https?:\/{2})?(?:w{3}\.)?youtu(?:be)?\.(?:com|be).(?:embed)(?:\/watch\?v=|\/)([^\s&]+)/)[1],$lbt_ivideos_thumbnail="https://i3.ytimg.com/vi/"+$lbt_ivideos_id+"/maxresdefault.jpg",t(this).after([t("<img/>").attr("src",$lbt_ivideos_thumbnail).data("lbt-thumb",$lbt_ivideos_thumbnail).css("height",$lbt_ivideos_height).css("width",$lbt_ivideos_width).data("iframe_src",$lbt_ivideos_src).data("frameborder",$lbt_ivideos_frameborder).data("fullscreen",$lbt_ivideos_fullscre).data("iframe_allow",$lbt_ivideos_allow)]),t(this).remove();else{if(!a.test($lbt_ivideos_src))return;$lbt_ivideos_id=$lbt_ivideos_src.match(/(?:https?:\/\/)?(?:www.|player.)?vimeo.com(?:\/*(?:video\/|))([-a-zA-Z0-9_]{9}).([\w\\-_]+)\&?/)[1],$vimeo_obj=t(this),t.getJSON("https://vimeo.com/api/oembed.json?url=https://vimeo.com/"+$lbt_ivideos_id,{format:"json"},(function(n){$lbt_ivideos_thumbnail=n.thumbnail_url,$vimeo_obj.after([t("<img/>").attr("src",$lbt_ivideos_thumbnail).data("lbt-thumb",$lbt_ivideos_thumbnail).css("height",$lbt_ivideos_height).css("width",$lbt_ivideos_width).data("iframe_src",$lbt_ivideos_src).data("frameborder",$lbt_ivideos_frameborder).data("fullscreen",$lbt_ivideos_fullscre).data("iframe_allow",$lbt_ivideos_allow)]),$vimeo_obj.remove(),i=t(e.custom_children,e.container_images)}))}})),i=t(e.custom_children,e.container_images)}function A(o,a){n=i.length,$start=Math.max(0,Math.ceil(t(o).index(e.custom_children)-e.qtd_pagination/2)),$final=Math.min(n-1,Number.isInteger($f=Math.floor(t(o).index(e.custom_children))+e.qtd_pagination/2)?$f-1:$f),0==$start?$final=Math.min(e.qtd_pagination-1,n-1):$final==n-1&&($start=Math.max(0,n-e.qtd_pagination));for(var l=$start;l<=$final;l++)$thumb=null,l!=t(o).index(e.custom_children)?t(a,e.container_lightbox).append([t("<li/>").append([$thumb=t("<img/>",{class:"lbr-thumb"}).data("thumb_id",l).css({width:e.pagination_width,height:e.pagination_height})])]):t(a,e.container_lightbox).append([t("<li/>").append([$thumb=t("<img/>",{class:"lbr-thumb"}).data("thumb_id",l).addClass("active").css({width:e.pagination_width,height:e.pagination_height})])]),void 0===i.eq(l).data("lbt-thumb")?B(i.eq(l),{h:Number(e.pagination_height.replace("px","")),w:Number(e.pagination_width.replace("px",""))},$thumb):t($thumb).attr("src",i.eq(l).data("lbt-thumb"))}function P(e){t(e).each((function(e){void 0!==t(this).attr("src")&&null==t(this).attr("src").match("^blob:https?://(?:www.)?")&&async function(e){var i=new Image;i.setAttribute("crossOrigin","anonymous"),i.src=t(e).attr("src"),i.onload=function(){var t=document.createElement("canvas");t.height=this.naturalHeight,t.width=this.naturalWidth,t.getContext("2d").drawImage(this,0,0),R(t.toDataURL(),e,!1,!0)},await i.decode()}(this)}))}function B(i,n,o){N(t(i).attr("src"),n,t(i,e.container_lightbox),o)}function N(t,e,i,n=null){(e=e||{}).q=e.q||1,e.r=e.r||1;var o=new Image;o.setAttribute("crossOrigin","anonymous"),o.src=t,o.onload=function(){var t=document.createElement("canvas");e.w&&e.h?e.w>e.h?(t.width=e.w,t.height=this.naturalHeight*e.w/this.naturalWidth):(t.width=this.naturalWidth*e.h/this.naturalHeight,t.height=e.h):e.w?(t.width=e.w,t.height=this.naturalHeight*e.w/this.naturalWidth):e.h?(t.width=this.naturalWidth*e.h/this.naturalHeight,t.height=e.h):(t.width=this.naturalWidth*e.r,t.height=this.naturalHeight*e.r),t.getContext("2d").drawImage(this,0,0,t.width,t.height),R(t.toDataURL(),i,n)}}function R(i,n,o,a=!1){if(a){$oimage=t(n,e.container_lightbox).attr("src"),t(n,e.container_lightbox).attr("src",i),$blob=function(t){let e=t.split(";base64")[0].replace("data:","");return function(t,e){e=e||"";for(var i=1024,n=atob(t),o=n.length,a=Math.ceil(o/i),l=new Array(a),r=0;r<a;++r){for(var s=r*i,d=Math.min(s+i,o),c=new Array(d-s),h=s,b=0;h<d;++b,++h)c[b]=n[h].charCodeAt(0);l[r]=new Uint8Array(c)}return new Blob(l,{type:e})}(t.split(",")[1],e)}(i),t(n,e.container_lightbox).attr("src",URL.createObjectURL($blob));let o={type:$oimage,image:$blob,created:new Date};l="images",r=o,new Promise((function(t,e){var i=indexedDB.open("lbt_lightbox");i.onerror=function(t){e(Error("IndexedDB database error"))},i.onupgradeneeded=function(t){t.target.result.createObjectStore(l,{keyPath:"id",autoIncrement:!0})},i.onsuccess=function(i){var n=i.target.result.transaction([l],"readwrite").objectStore(l).put(r);n.onerror=function(t){e(Error("Error text"))},n.onsuccess=function(e){t("Data saved OK")}}}))}else t(n,e.container_lightbox).data("lbt-thumb",i);var l,r;o&&t(o,e.container_lightbox).attr("src",i)}return t.fn.OpenViewer=function(i){I(i),k(t(i).index(e.custom_children),null),A(i,"#lbt-thumbnails"),q(),t("body").addClass("lbr-ToFixed"),$()},t.fn.update=function(){V(),z(),setTimeout((function(){i=t(e.custom_children,e.container_images),n=i.length,P(i)}),500)},t.fn.preload=function(){i=t(e.custom_children,e.container_images),n=i.length;for(var o=0;o<n;o++)void 0===i.eq(o).data("lbt-thumb")?(B(i.eq(o),{h:Number(e.pagination_height.replace("px","")),w:Number(e.pagination_width.replace("px",""))},null),a=i.eq(o).attr("src"),void 0,(new Image).src=a):t($thumb).attr("src",i.eq(o).data("lbt-thumb"));var a},t("img.lbr-thumb").queue((function(e){t(this).remove(),e()})),this.each((function(i){$id="#lbt-lightbox_"+(Math.floor(999*Math.random())+i),$idi="#"+(void 0===t(this).attr("id")?t(this).attr("id","lbt-imgs_"+(Math.floor(999*Math.random())+i)).attr("id"):t(this).attr("id")),t("body").append([$con_lightbox=t("<div/>",{id:$id.replace("#","")})]),x(0,e=t.extend({lbt_id:$id,lbr_id:$idi,container_images:this,container_lightbox:$con_lightbox},e))}))}}(jQuery);